function handleLogin(){var e=[],o=window.swaggerUiAuth.authSchemes||window.swaggerUiAuth.securityDefinitions;if(o){var a,i=o;for(a in i){var n=i[a];if("oauth2"===n.type&&n.scopes){var t;if(Array.isArray(n.scopes)){var p;for(p=0;p<n.scopes.length;p++)e.push(n.scopes[p])}else for(t in n.scopes)e.push({scope:t,description:n.scopes[t],OAuthSchemeKey:a})}}}for(window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),$(".api-popup-dialog").remove(),popupDialog=$(['<div class="modal api-popup-dialog in" id="credentials-modal" tabindex="-1" role="dialog" aria-labelledby="credentials-modal-label" aria-hidden="false" style="display: block">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close api-popup-cancel" data-dismiss="modal"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>','<h3 class="modal-title" id="credentials-modal-label">Select OAuth2.0 Scopes</h3>',"</div>",'<div class="modal-body">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>","<form>",'<div class="api-popup-scopes">','<div class="scopes">',"</div>","</div>","<form>",'<p class="error-msg"></p>',"</div>",'<div class="modal-footer">','<div class="api-popup-actions"><button class="api-popup-cancel btn btn-default" type="button">Cancel</button><button class="api-popup-authbtn btn btn-primary" type="button">Authorize</button></div>',"</div>","</div>","</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find(".scopes").empty(),p=0;p<e.length;p++)t=e[p],str='<span data-toggle-scope="'+t.scope+'" class="scope">'+t.scope+"</span>",popup.append(str);popupDialog.find("scopes").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),popupDialog.find("[data-toggle-scope]").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide(),popupDialog.empty(),popupDialog=[]}),$("button.api-popup-authbtn").unbind(),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide();var e,o=window.swaggerUi.api.authSchemes,a=window.location,i=location.pathname.substring(0,location.pathname.lastIndexOf("/")),n=a.protocol+"//"+a.host+i+"/o2c.html",t=window.oAuthRedirectUrl||n,p=null,s=[],r=popup.find("input:checked"),l=[];for(k=0;k<r.length;k++){var c=$(r[k]).attr("scope");s.indexOf(c)===-1&&s.push(c);var d=$(r[k]).attr("oauthtype");l.indexOf(d)===-1&&l.push(d)}window.enabledScopes=s;for(var u in o)if(o.hasOwnProperty(u)&&l.indexOf(u)!=-1){var h=o[u].flow;if("oauth2"!==o[u].type||!h||"implicit"!==h&&"accessCode"!==h){if("oauth2"===o[u].type&&h&&"application"===h){var g=o[u];return window.swaggerUi.tokenName=g.tokenName||"access_token",void clientCredentialsFlow(s,g.tokenUrl,u)}if(o[u].grantTypes){var r=o[u].grantTypes;for(var w in r)if(r.hasOwnProperty(w)&&"implicit"===w){var g=r[w];g.loginEndpoint.url;p=g.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=g.tokenName}else if(r.hasOwnProperty(w)&&"accessCode"===w){var g=r[w];g.tokenRequestEndpoint.url;p=g.tokenRequestEndpoint.url+"?response_type=code",window.swaggerUi.tokenName=g.tokenName}}}else{var g=o[u];p=g.authorizationUrl+"?response_type="+("implicit"===h?"token":"code"),window.swaggerUi.tokenName=g.tokenName||"access_token",window.swaggerUi.tokenUrl="accessCode"===h?g.tokenUrl:null,e=u}}redirect_uri=t,p+="&redirect_uri="+encodeURIComponent(t),p+="&realm="+encodeURIComponent(realm),p+="&client_id="+encodeURIComponent(clientId),p+="&scope="+encodeURIComponent(s.join(scopeSeparator)),p+="&state="+encodeURIComponent(e);for(var u in additionalQueryStringParams)p+="&"+u+"="+encodeURIComponent(additionalQueryStringParams[u]);window.open(p)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.swaggerUi.api.clientAuthorizations.authz)window.swaggerUi.api.clientAuthorizations.remove(key);window.enabledScopes=null;var e=$(".api-ic");e.addClass("btn-default"),e.removeClass("btn-success"),e.removeClass("btn-warning"),e.text("oauth"),$("#input_apiKey").val("")}function initOAuth(e){var o=e||{},a=[];if(appName=o.appName||a.push("missing appName"),popupMask=o.popupMask||$("#api-common-mask"),popupDialog=o.popupDialog||$(".api-popup-dialog"),clientId=o.clientId||a.push("missing client id"),clientSecret=o.clientSecret||null,realm=o.realm||a.push("missing realm"),scopeSeparator=o.scopeSeparator||" ",additionalQueryStringParams=o.additionalQueryStringParams||{},a.length>0)return void log("auth unable initialize oauth: "+a);$("pre code").each(function(e,o){hljs.highlightBlock(o)});var i=$(".api-ic");i.unbind(),i.click(function(e){$(e.target).hasClass("btn-default")?handleLogin():handleLogout()})}var appName,popupMask,popupDialog,clientId,realm,redirect_uri,clientSecret,scopeSeparator,additionalQueryStringParams;window.clientCredentialsFlow=function(e,o,a){var i={client_id:clientId,client_secret:clientSecret,scope:e.join(" "),grant_type:"client_credentials"};$.ajax({url:o,type:"POST",data:i,success:function(e,o,i){onOAuthComplete(e,a)},error:function(e,o,a){onOAuthComplete("")}})},window.processOAuthCode=function(e){var o=e.state,a=window.location,i=location.pathname.substring(0,location.pathname.lastIndexOf("/")),n=a.protocol+"//"+a.host+i+"/o2c.html",t=window.oAuthRedirectUrl||n,p={client_id:clientId,code:e.code,grant_type:"authorization_code",redirect_uri:t};clientSecret&&(p.client_secret=clientSecret),$.ajax({url:window.swaggerUiAuth.tokenUrl,type:"POST",data:p,success:function(e,a,i){onOAuthComplete(e,o)},error:function(e,o,a){onOAuthComplete("")}})},window.onOAuthComplete=function(e,o){if(e)if(e.error){var a=$("input[type=checkbox],.secured");a.each(function(e){a[e].checked=!1}),alert(e.error)}else{var i=e[window.swaggerUiAuth.tokenName];if(o||(o=e.state),i){var n=null;$.each($(".auth .api-ic .api_information_panel"),function(e,o){var a=o;if(a&&a.childNodes){var i=[];$.each(a.childNodes,function(e,o){var a=o.innerHTML;a&&i.push(a)});for(var t=[],p=0;p<i.length;p++){var s=i[p];window.enabledScopes&&window.enabledScopes.indexOf(s)==-1&&t.push(s)}t.length>0?(n=o.parentNode.parentNode,$(n).find(".api-ic").addClass("btn-warning"),$(n).find(".api-ic").removeClass("btn-default"),$(n).find(".api-ic").removeClass("btn-success")):(n=o.parentNode.parentNode,$(n).find(".api-ic").addClass("btn-success"),$(n).find(".api-ic").removeClass("btn-default"),$(n).find(".api-ic").removeClass("btn-warning"))}}),"undefined"!=typeof window.swaggerUi&&(window.swaggerUi.api.clientAuthorizations.add(window.swaggerUiAuth.OAuthSchemeKey,new SwaggerClient.ApiKeyAuthorization("Authorization","Bearer "+i,"header")),window.swaggerUi.load())}}};